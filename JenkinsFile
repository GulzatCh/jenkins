pipeline {

 agent any

stages {

 stage('Build image') {
     steps {
        sh '''
        docker build -t myawesomecat:${BUILD_NUMBER} -f /awesome_cats_backend/Dockerfile
        '''
 stage('Login') {
      steps {
        sh 'echo $DOCKERHUB_CREDENTIALS_PSW | docker login -u $DOCKERHUB_CREDENTIALS_USR --password-stdin'
      }
    }
    stage('Push') {
      steps {
        sh 'docker push lloydmatereke/jenkins-docker-hub'
        
      }
      }
     }
  }
  stage('Deploy') {
    steps {
        sh 'echo "it was done through jenkins"'
        
    }
    }
  
 } 

}
